<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of structviewer</title>
  <meta name="keywords" content="structviewer">
  <meta name="description" content="structviewer Application M-file for structviewer.fig">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">PLDAPS</a> &gt; <a href="index.html">@params</a> &gt; structviewer.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for PLDAPS/@params&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>@params/structviewer
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>structviewer Application M-file for structviewer.fig</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function varargout = structviewer(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="description"> structviewer Application M-file for structviewer.fig
   structviewer, by itself, creates a new structviewer or raises the existing
   singleton*.

   H = structviewer returns the handle to a new structviewer or the handle to
   the existing singleton*.

   structviewer('CALLBACK',hObject,eventData,handles,...) calls the local
   function named CALLBACK in structviewer.M with the given input arguments.

   structviewer('Property','Value',...) creates a new structviewer or raises the
   existing singleton*.  Starting from the left, property value pairs are
   applied to the GUI before structviewer_OpeningFunction gets called.  An
   unrecognized property name or invalid value makes property application
   stop.  All inputs are passed to structviewer_OpeningFcn via varargin.

   *See GUI Options - GUI allows only one instance to run (singleton).

 See also: GUIDE, GUIDATA, GUIHANDLES</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../PLDAPS/@params/private/distinguishable_colors.html" class="code" title="function colors = distinguishable_colors(n_colors,bg,func)">@params/privatedistinguishable_colors</a>	DISTINGUISHABLE_COLORS: pick colors that are maximally perceptually distinct</li><li><a href="../../PLDAPS/@params/private/findjobj.html" class="code" title="function [handles,levels,parentIdx,listing] = findjobj(container,varargin) %#ok<*CTCH,*ASGLU,*MSNU,*NASGU>">@params/privatefindjobj</a>	findjobj Find java objects contained within a specified java container or Matlab GUI handle</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="params.html" class="code" title="function p=params(s,sN,active)">@params/params</a>	PARAMS    A hierarchical parameter handling class</li></ul>
<!-- crossreference -->

<!-- parameterreference -->
<h2><a name="_cross"></a>PARAMETER USAGE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function uses these parameters:
<ul >
</ul>
This function assigns these parameters:
<ul>
</ul>
<!-- parameterreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">structviewer_OpeningFcn</a></li><li><a href="#_sub2" class="code">setListboxes</a></li><li><a href="#_sub3" class="code">structviewer_OutputFcn</a></li><li><a href="#_sub4" class="code">listbox1_ScrollCallback</a></li><li><a href="#_sub5" class="code">listbox2_ScrollCallback</a></li><li><a href="#_sub6" class="code">listbox1_Callback</a></li><li><a href="#_sub7" class="code">listbox1_CreateFcn</a></li><li><a href="#_sub8" class="code">figure1_CreateFcn</a></li><li><a href="#_sub9" class="code">figure1_DeleteFcn</a></li><li><a href="#_sub10" class="code">listbox2_Callback</a></li><li><a href="#_sub11" class="code">listbox2_CreateFcn</a></li><li><a href="#_sub12" class="code">structListbox_Callback</a></li><li><a href="#_sub13" class="code">structListbox_CreateFcn</a></li><li><a href="#_sub14" class="code">structValueListbox_Callback</a></li><li><a href="#_sub15" class="code">structValueListbox_CreateFcn</a></li><li><a href="#_sub16" class="code">setStructListbox</a></li><li><a href="#_sub17" class="code">setFieldEditor</a></li><li><a href="#_sub18" class="code">fieldEditor_Callback</a></li><li><a href="#_sub19" class="code">fieldEditor_CreateFcn</a></li><li><a href="#_sub20" class="code">structValueListbox_ButtonDownFcn</a></li><li><a href="#_sub21" class="code">structValueListbox_Reassign</a></li><li><a href="#_sub22" class="code">structListbox_ButtonDownFcn</a></li><li><a href="#_sub23" class="code">pushbutton1_Callback</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre><div id="_line0001" class="line">0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = structviewer(varargin)</a>
</div><div id="_line0002" class="line">0002 <span class="comment">% structviewer Application M-file for structviewer.fig</span>
</div><div id="_line0003" class="line">0003 <span class="comment">%   structviewer, by itself, creates a new structviewer or raises the existing</span>
</div><div id="_line0004" class="line">0004 <span class="comment">%   singleton*.</span>
</div><div id="_line0005" class="line">0005 <span class="comment">%</span>
</div><div id="_line0006" class="line">0006 <span class="comment">%   H = structviewer returns the handle to a new structviewer or the handle to</span>
</div><div id="_line0007" class="line">0007 <span class="comment">%   the existing singleton*.</span>
</div><div id="_line0008" class="line">0008 <span class="comment">%</span>
</div><div id="_line0009" class="line">0009 <span class="comment">%   structviewer('CALLBACK',hObject,eventData,handles,...) calls the local</span>
</div><div id="_line0010" class="line">0010 <span class="comment">%   function named CALLBACK in structviewer.M with the given input arguments.</span>
</div><div id="_line0011" class="line">0011 <span class="comment">%</span>
</div><div id="_line0012" class="line">0012 <span class="comment">%   structviewer('Property','Value',...) creates a new structviewer or raises the</span>
</div><div id="_line0013" class="line">0013 <span class="comment">%   existing singleton*.  Starting from the left, property value pairs are</span>
</div><div id="_line0014" class="line">0014 <span class="comment">%   applied to the GUI before structviewer_OpeningFunction gets called.  An</span>
</div><div id="_line0015" class="line">0015 <span class="comment">%   unrecognized property name or invalid value makes property application</span>
</div><div id="_line0016" class="line">0016 <span class="comment">%   stop.  All inputs are passed to structviewer_OpeningFcn via varargin.</span>
</div><div id="_line0017" class="line">0017 <span class="comment">%</span>
</div><div id="_line0018" class="line">0018 <span class="comment">%   *See GUI Options - GUI allows only one instance to run (singleton).</span>
</div><div id="_line0019" class="line">0019 <span class="comment">%</span>
</div><div id="_line0020" class="line">0020 <span class="comment">% See also: GUIDE, GUIDATA, GUIHANDLES</span>
</div><div id="_line0021" class="line">0021 
</div><div id="_line0022" class="line">0022 <span class="comment">% Copyright 2000-2006 The MathWorks, Inc.</span>
</div><div id="_line0023" class="line">0023 
</div><div id="_line0024" class="line">0024 <span class="comment">% Edit the above text to modify the response to help structviewer</span>
</div><div id="_line0025" class="line">0025 
</div><div id="_line0026" class="line">0026 <span class="comment">% Last Modified by GUIDE v2.5 24-Apr-2014 13:10:56</span>
</div><div id="_line0027" class="line">0027 
</div><div id="_line0028" class="line">0028 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
</div><div id="_line0029" class="line">0029 gui_Singleton = 1;
</div><div id="_line0030" class="line">0030 gui_State = struct(<span class="string">'gui_Name'</span>,          mfilename, <span class="keyword">...</span>
</div><div id="_line0031" class="line">0031                    <span class="string">'gui_Singleton'</span>,     gui_Singleton, <span class="keyword">...</span>
</div><div id="_line0032" class="line">0032                    <span class="string">'gui_OpeningFcn'</span>,    @<a href="#_sub1" class="code" title="substructviewer_OpeningFcn">structviewer_OpeningFcn</a>, <span class="keyword">...</span>
</div><div id="_line0033" class="line">0033                    <span class="string">'gui_OutputFcn'</span>,     @<a href="#_sub3" class="code" title="substructviewer_OutputFcn">structviewer_OutputFcn</a>, <span class="keyword">...</span>
</div><div id="_line0034" class="line">0034                    <span class="string">'gui_LayoutFcn'</span>,     [], <span class="keyword">...</span>
</div><div id="_line0035" class="line">0035                    <span class="string">'gui_Callback'</span>,      []);
</div><div id="_line0036" class="line">0036 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
</div><div id="_line0037" class="line">0037    gui_State.gui_Callback = str2func(varargin{1});
</div><div id="_line0038" class="line">0038 <span class="keyword">end</span>
</div><div id="_line0039" class="line">0039 
</div><div id="_line0040" class="line">0040 <span class="keyword">if</span> nargout
</div><div id="_line0041" class="line">0041     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
</div><div id="_line0042" class="line">0042 <span class="keyword">else</span>
</div><div id="_line0043" class="line">0043     gui_mainfcn(gui_State, varargin{:});
</div><div id="_line0044" class="line">0044 <span class="keyword">end</span>
</div><div id="_line0045" class="line">0045 <span class="comment">% End initialization code - DO NOT EDIT</span>
</div><div id="_line0046" class="line">0046 
</div><div id="_line0047" class="line">0047 
</div><div id="_line0048" class="line">0048 <span class="comment">% --- Executes just before structviewer is made visible.</span>
</div><div id="_line0049" class="line">0049 <a name="_sub1" href="#_subfunctions" class="code">function structviewer_OpeningFcn(hObject, eventdata, handles, varargin)</a>
</div><div id="_line0050" class="line">0050 <span class="comment">% This function has no output args, see OutputFcn.</span>
</div><div id="_line0051" class="line">0051 <span class="comment">% hObject    handle to figure</span>
</div><div id="_line0052" class="line">0052 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0053" class="line">0053 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0054" class="line">0054 <span class="comment">% varargin   command line arguments to structviewer (see VARARGIN)</span>
</div><div id="_line0055" class="line">0055 
</div><div id="_line0056" class="line">0056 <span class="comment">% Choose default command line output for structviewer</span>
</div><div id="_line0057" class="line">0057     handles.output = hObject;
</div><div id="_line0058" class="line">0058     handles.param = varargin{1};
</div><div id="_line0059" class="line">0059 
</div><div id="_line0060" class="line">0060     <span class="comment">% copy structs from params</span>
</div><div id="_line0061" class="line">0061     <span class="comment">% copy because we don't want to change the classes values only once we</span>
</div><div id="_line0062" class="line">0062     <span class="comment">% click save</span>
</div><div id="_line0063" class="line">0063     [s, sN, active]=getAllStructs(handles.param);
</div><div id="_line0064" class="line">0064     handles.backup={s, sN, active};
</div><div id="_line0065" class="line">0065     
</div><div id="_line0066" class="line">0066 <span class="comment">%     handles.flatStruct=handles.param.flatStruct;</span>
</div><div id="_line0067" class="line">0067 <span class="comment">%     handles.structInfo.levels=handles.param.flatStructLevels;</span>
</div><div id="_line0068" class="line">0068 <span class="comment">%     handles.structInfo.nLevels=length(handles.structInfo.levels);</span>
</div><div id="_line0069" class="line">0069 <span class="comment">%     handles.structInfo.levelNames=handles.param.structNames(handles.structInfo.levels);</span>
</div><div id="_line0070" class="line">0070     handles.robot_in_action=false;
</div><div id="_line0071" class="line">0071     <span class="comment">% setListboxes(handles,flatStruct)</span>
</div><div id="_line0072" class="line">0072 
</div><div id="_line0073" class="line">0073     <span class="comment">% Update handles structure</span>
</div><div id="_line0074" class="line">0074     guidata(hObject, handles);
</div><div id="_line0075" class="line">0075 
</div><div id="_line0076" class="line">0076     <span class="comment">% Populate the listbox</span>
</div><div id="_line0077" class="line">0077     <a href="#_sub2" class="code" title="subsetListboxes">setListboxes</a>(handles);
</div><div id="_line0078" class="line">0078 
</div><div id="_line0079" class="line">0079 
</div><div id="_line0080" class="line">0080 <a name="_sub2" href="#_subfunctions" class="code">function setListboxes(handles,selectedID, selectedHierarchy)</a>
</div><div id="_line0081" class="line">0081     <span class="comment">%they are merged. let's sort by identifier</span>
</div><div id="_line0082" class="line">0082     flatStruct=handles.param.flatStruct;
</div><div id="_line0083" class="line">0083     
</div><div id="_line0084" class="line">0084     flatStruct(cellfun(@isempty,{flatStruct.parentLevels}))=[];
</div><div id="_line0085" class="line">0085     
</div><div id="_line0086" class="line">0086     levelNames=handles.param.structNames;
</div><div id="_line0087" class="line">0087 <span class="comment">%     nLevels=length(levelNames);</span>
</div><div id="_line0088" class="line">0088     activeLevels=find(handles.param.activeLevels);
</div><div id="_line0089" class="line">0089     nActiveLevels=length(activeLevels);
</div><div id="_line0090" class="line">0090 
</div><div id="_line0091" class="line">0091     [~, sortIdsIdx]=sort({flatStruct.identifier});
</div><div id="_line0092" class="line">0092     flatStruct=flatStruct(sortIdsIdx);
</div><div id="_line0093" class="line">0093 
</div><div id="_line0094" class="line">0094     <span class="keyword">if</span> nargin&lt;2
</div><div id="_line0095" class="line">0095         field_index=1;
</div><div id="_line0096" class="line">0096         selectedID=flatStruct(1).identifier;
</div><div id="_line0097" class="line">0097     <span class="keyword">else</span>
</div><div id="_line0098" class="line">0098         field_index=find(strcmp({flatStruct.identifier},selectedID));
</div><div id="_line0099" class="line">0099     <span class="keyword">end</span>
</div><div id="_line0100" class="line">0100 
</div><div id="_line0101" class="line">0101     colors=<a href="../../PLDAPS/@params/private/distinguishable_colors.html" class="code" title="function colors = distinguishable_colors(n_colors,bg,func)">distinguishable_colors</a>(nActiveLevels,{<span class="string">'w'</span>,<span class="string">'k'</span>});
</div><div id="_line0102" class="line">0102     colorsTree=colors/2;
</div><div id="_line0103" class="line">0103     structInfo.colors=colors;
</div><div id="_line0104" class="line">0104     structInfo.colorsTree=colorsTree;
</div><div id="_line0105" class="line">0105     structInfo.currentValues=cell(1,nActiveLevels);
</div><div id="_line0106" class="line">0106     structInfo.currentValueStrings=cell(1,nActiveLevels);
</div><div id="_line0107" class="line">0107     
</div><div id="_line0108" class="line">0108     colorString=cell(1,nActiveLevels);
</div><div id="_line0109" class="line">0109     colorTreeString=cell(1,nActiveLevels);
</div><div id="_line0110" class="line">0110     <span class="keyword">for</span> iLevel=1:nActiveLevels
</div><div id="_line0111" class="line">0111         colorString{iLevel}=sprintf(<span class="string">'%s'</span>,dec2hex(round(structInfo.colors(iLevel,:)*255))');
</div><div id="_line0112" class="line">0112         colorTreeString{iLevel}=<span class="string">'000000'</span>;<span class="comment">%sprintf('%s',dec2hex(round(handles.structInfo.colorsTree(iLevel,:)*255))');</span>
</div><div id="_line0113" class="line">0113     <span class="keyword">end</span>
</div><div id="_line0114" class="line">0114 <span class="comment">%     structInfo.colorString=colorString;</span>
</div><div id="_line0115" class="line">0115 <span class="comment">%     structInfo.colorTreeString=colorTreeString;</span>
</div><div id="_line0116" class="line">0116 
</div><div id="_line0117" class="line">0117     
</div><div id="_line0118" class="line">0118     flatStruct(cellfun(@(x) ~any(ismember(x,activeLevels)),{flatStruct.hierarchyLevels}))=[];
</div><div id="_line0119" class="line">0119     
</div><div id="_line0120" class="line">0120     nFields=length(flatStruct);
</div><div id="_line0121" class="line">0121     <span class="keyword">for</span> iField=1:nFields
</div><div id="_line0122" class="line">0122         hierarchy_index=activeLevels==max(flatStruct(iField).hierarchyLevels);
</div><div id="_line0123" class="line">0123         <span class="keyword">if</span> flatStruct(iField).isNode
</div><div id="_line0124" class="line">0124             flatStruct(iField).string=sprintf([<span class="string">'&lt;HTML&gt;&lt;pre&gt;&lt;FONT color=%s&gt;'</span> repmat(<span class="string">' '</span>,[1 length(flatStruct(iField).parentLevels)-1]) <span class="string">'- '</span> <span class="string">'.%s&lt;/FONT&gt;&lt;/HTML&gt;'</span>],colorTreeString{hierarchy_index},flatStruct(iField).parentLevels{end});
</div><div id="_line0125" class="line">0125         <span class="keyword">else</span>
</div><div id="_line0126" class="line">0126             flatStruct(iField).string=sprintf([<span class="string">'&lt;HTML&gt;&lt;pre&gt;&lt;FONT color=%s&gt;'</span> repmat(<span class="string">' '</span>,[1 length(flatStruct(iField).parentLevels)]) <span class="string">'  .%s&lt;/FONT&gt;&lt;/HTML&gt;'</span>],colorString{hierarchy_index},flatStruct(iField).parentLevels{end});
</div><div id="_line0127" class="line">0127         <span class="keyword">end</span>
</div><div id="_line0128" class="line">0128     <span class="keyword">end</span>
</div><div id="_line0129" class="line">0129 
</div><div id="_line0130" class="line">0130     <span class="keyword">for</span> iField=1:nFields
</div><div id="_line0131" class="line">0131         <span class="keyword">if</span>(flatStruct(iField).isNode)<span class="comment">%branch</span>
</div><div id="_line0132" class="line">0132             flatStruct(iField).valueString=<span class="string">''</span>;
</div><div id="_line0133" class="line">0133         <span class="keyword">else</span>
</div><div id="_line0134" class="line">0134             flatStruct(iField).valueString=params.valueString(getParameter(handles.param,flatStruct(iField).identifier));<span class="comment">%evalc('disp(flatStruct(iField).value)');</span>
</div><div id="_line0135" class="line">0135         <span class="keyword">end</span>
</div><div id="_line0136" class="line">0136     <span class="keyword">end</span>
</div><div id="_line0137" class="line">0137     
</div><div id="_line0138" class="line">0138     levelNamesColored=cell(1,nActiveLevels);
</div><div id="_line0139" class="line">0139     <span class="keyword">for</span> iLevel=1:nActiveLevels
</div><div id="_line0140" class="line">0140         levelNamesColored{iLevel}=sprintf(<span class="string">'&lt;HTML&gt;&lt;pre&gt;&lt;FONT color=%s&gt;%s&lt;/FONT&gt;&lt;/HTML&gt;'</span>,colorString{iLevel},levelNames{activeLevels(iLevel)});
</div><div id="_line0141" class="line">0141     <span class="keyword">end</span>
</div><div id="_line0142" class="line">0142     handles.structInfo.levelDisplayNames=levelNames(activeLevels);
</div><div id="_line0143" class="line">0143     handles.structInfo.levelDisplayColors=colorString;
</div><div id="_line0144" class="line">0144 
</div><div id="_line0145" class="line">0145 <span class="comment">%     handles.flatStruct=flatStruct;</span>
</div><div id="_line0146" class="line">0146     set(handles.listbox1,<span class="string">'String'</span>,{flatStruct.string}',<span class="keyword">...</span>
</div><div id="_line0147" class="line">0147         <span class="string">'Value'</span>,1)
</div><div id="_line0148" class="line">0148     set(handles.listbox2,<span class="string">'String'</span>,{flatStruct.valueString}',<span class="keyword">...</span>
</div><div id="_line0149" class="line">0149         <span class="string">'Value'</span>,1)
</div><div id="_line0150" class="line">0150     set(handles.structListbox,<span class="string">'String'</span>,levelNamesColored,<span class="keyword">...</span>
</div><div id="_line0151" class="line">0151         <span class="string">'Value'</span>,1)
</div><div id="_line0152" class="line">0152     set(handles.structValueListbox,<span class="string">'String'</span>,structInfo.currentValueStrings,<span class="keyword">...</span>
</div><div id="_line0153" class="line">0153         <span class="string">'Value'</span>,1)
</div><div id="_line0154" class="line">0154     set(handles.structListbox,<span class="string">'Max'</span>,nActiveLevels);
</div><div id="_line0155" class="line">0155 <span class="comment">%     set(handles.structValueListbox,'Max',nLevels);</span>
</div><div id="_line0156" class="line">0156 
</div><div id="_line0157" class="line">0157 
</div><div id="_line0158" class="line">0158 
</div><div id="_line0159" class="line">0159 
</div><div id="_line0160" class="line">0160     handles.idList={flatStruct.identifier};
</div><div id="_line0161" class="line">0161     handles.levelList=levelNames(activeLevels);
</div><div id="_line0162" class="line">0162     
</div><div id="_line0163" class="line">0163     guidata(handles.figure1,handles)
</div><div id="_line0164" class="line">0164 
</div><div id="_line0165" class="line">0165     set(handles.listbox1,<span class="string">'Value'</span>, field_index);
</div><div id="_line0166" class="line">0166     set(handles.listbox2,<span class="string">'Value'</span>, field_index);
</div><div id="_line0167" class="line">0167 
</div><div id="_line0168" class="line">0168     <span class="keyword">if</span> nargin&lt;3
</div><div id="_line0169" class="line">0169         <a href="#_sub16" class="code" title="subsetStructListbox">setStructListbox</a>(handles,selectedID);<span class="comment">%?</span>
</div><div id="_line0170" class="line">0170     <span class="keyword">else</span>
</div><div id="_line0171" class="line">0171         <a href="#_sub16" class="code" title="subsetStructListbox">setStructListbox</a>(handles,selectedID,selectedHierarchy);
</div><div id="_line0172" class="line">0172     <span class="keyword">end</span>
</div><div id="_line0173" class="line">0173 
</div><div id="_line0174" class="line">0174 
</div><div id="_line0175" class="line">0175 
</div><div id="_line0176" class="line">0176 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
</div><div id="_line0177" class="line">0177 <a name="_sub3" href="#_subfunctions" class="code">function varargout = structviewer_OutputFcn(hObject, eventdata, handles)</a>
</div><div id="_line0178" class="line">0178 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
</div><div id="_line0179" class="line">0179 <span class="comment">% hObject    handle to figure</span>
</div><div id="_line0180" class="line">0180 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0181" class="line">0181 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0182" class="line">0182 
</div><div id="_line0183" class="line">0183 <span class="comment">% this gets called just after it's visible, so its the best place to to the</span>
</div><div id="_line0184" class="line">0184 <span class="comment">% findobj calls, as it makes invisible object visible while searching....</span>
</div><div id="_line0185" class="line">0185 <span class="comment">%     jScrollPane = findjobj(handles.listbox2);</span>
</div><div id="_line0186" class="line">0186 <span class="comment">%     jListbox = jScrollPane.getViewport.getComponent(0);</span>
</div><div id="_line0187" class="line">0187 <span class="comment">%     set(jListbox, 'SelectionBackground',[0.8 0.8 0.8]);</span>
</div><div id="_line0188" class="line">0188 <span class="comment">%</span>
</div><div id="_line0189" class="line">0189 <span class="comment">%     jScrollPane = findjobj(handles.listbox1);</span>
</div><div id="_line0190" class="line">0190 <span class="comment">%     jListbox = jScrollPane.getViewport.getComponent(0);</span>
</div><div id="_line0191" class="line">0191 <span class="comment">%     set(jListbox, 'SelectionBackground',[0.8 0.8 0.8]);</span>
</div><div id="_line0192" class="line">0192 <span class="comment">%</span>
</div><div id="_line0193" class="line">0193 <span class="comment">%     jScrollPane = findjobj(handles.structListbox);</span>
</div><div id="_line0194" class="line">0194 <span class="comment">%     jListbox = jScrollPane.getViewport.getComponent(0);</span>
</div><div id="_line0195" class="line">0195 <span class="comment">%     set(jListbox, 'SelectionBackground',[0.8 0.8 0.8]);</span>
</div><div id="_line0196" class="line">0196 <span class="comment">%</span>
</div><div id="_line0197" class="line">0197 <span class="comment">%     jScrollPane = findjobj(handles.structValueListbox);</span>
</div><div id="_line0198" class="line">0198 <span class="comment">%     jListbox = jScrollPane.getViewport.getComponent(0);</span>
</div><div id="_line0199" class="line">0199 <span class="comment">%     set(jListbox, 'SelectionBackground',[0.8 0.8 0.8]);</span>
</div><div id="_line0200" class="line">0200 <span class="comment">%</span>
</div><div id="_line0201" class="line">0201     [jScrollBar]=<a href="../../PLDAPS/@params/private/findjobj.html" class="code" title="function [handles,levels,parentIdx,listing] = findjobj(container,varargin) %#ok<*CTCH,*ASGLU,*MSNU,*NASGU>">findjobj</a>(handles.listbox1,<span class="string">'class'</span>,<span class="string">'com.mathworks.hg.peer.utils.UIScrollPane'</span>);
</div><div id="_line0202" class="line">0202     set(handle(jScrollBar,<span class="string">'CallbackProperties'</span>),<span class="string">'AdjustmentValueChangedCallback'</span>,{@<a href="#_sub4" class="code" title="sublistbox1_ScrollCallback">listbox1_ScrollCallback</a>, handles.listbox1 });
</div><div id="_line0203" class="line">0203     set(jScrollBar,<span class="string">'VerticalScrollBarPolicy'</span>,22); 
</div><div id="_line0204" class="line">0204     
</div><div id="_line0205" class="line">0205     [jScrollBar]=<a href="../../PLDAPS/@params/private/findjobj.html" class="code" title="function [handles,levels,parentIdx,listing] = findjobj(container,varargin) %#ok<*CTCH,*ASGLU,*MSNU,*NASGU>">findjobj</a>(handles.listbox2,<span class="string">'class'</span>,<span class="string">'com.mathworks.hg.peer.utils.UIScrollPane'</span>);
</div><div id="_line0206" class="line">0206     set(handle(jScrollBar,<span class="string">'CallbackProperties'</span>),<span class="string">'AdjustmentValueChangedCallback'</span>,{@<a href="#_sub5" class="code" title="sublistbox2_ScrollCallback">listbox2_ScrollCallback</a>, handles.listbox1 });
</div><div id="_line0207" class="line">0207     set(jScrollBar,<span class="string">'VerticalScrollBarPolicy'</span>,22); 
</div><div id="_line0208" class="line">0208     
</div><div id="_line0209" class="line">0209     varargout{1} = handles.output;
</div><div id="_line0210" class="line">0210     
</div><div id="_line0211" class="line">0211 <a name="_sub4" href="#_subfunctions" class="code">function listbox1_ScrollCallback(hObject, eventdata, listbox1_handle)    </a>
</div><div id="_line0212" class="line">0212 handles=guidata(listbox1_handle);
</div><div id="_line0213" class="line">0213 
</div><div id="_line0214" class="line">0214 l1_position=get(handles.listbox1,<span class="string">'ListboxTop'</span>);
</div><div id="_line0215" class="line">0215 l2_position=get(handles.listbox2,<span class="string">'ListboxTop'</span>);
</div><div id="_line0216" class="line">0216 
</div><div id="_line0217" class="line">0217 <span class="keyword">if</span>(l1_position~=l2_position)
</div><div id="_line0218" class="line">0218     set(handles.listbox2,<span class="string">'ListboxTop'</span>,l1_position)
</div><div id="_line0219" class="line">0219 <span class="keyword">end</span>
</div><div id="_line0220" class="line">0220 
</div><div id="_line0221" class="line">0221 
</div><div id="_line0222" class="line">0222 <a name="_sub5" href="#_subfunctions" class="code">function listbox2_ScrollCallback(hObject, eventdata, listbox2_handle)    </a>
</div><div id="_line0223" class="line">0223 handles=guidata(listbox2_handle);
</div><div id="_line0224" class="line">0224 
</div><div id="_line0225" class="line">0225 l1_position=get(handles.listbox1,<span class="string">'ListboxTop'</span>);
</div><div id="_line0226" class="line">0226 l2_position=get(handles.listbox2,<span class="string">'ListboxTop'</span>);
</div><div id="_line0227" class="line">0227 
</div><div id="_line0228" class="line">0228 <span class="keyword">if</span>(l1_position~=l2_position)
</div><div id="_line0229" class="line">0229     set(handles.listbox1,<span class="string">'ListboxTop'</span>,l2_position)
</div><div id="_line0230" class="line">0230 <span class="keyword">end</span>
</div><div id="_line0231" class="line">0231 
</div><div id="_line0232" class="line">0232     
</div><div id="_line0233" class="line">0233 <span class="comment">% ------------------------------------------------------------</span>
</div><div id="_line0234" class="line">0234 <span class="comment">% Callback for list box - open .fig with guide, otherwise use open</span>
</div><div id="_line0235" class="line">0235 <span class="comment">% ------------------------------------------------------------</span>
</div><div id="_line0236" class="line">0236 <a name="_sub6" href="#_subfunctions" class="code">function listbox1_Callback(hObject, eventdata, handles)</a>
</div><div id="_line0237" class="line">0237 <span class="comment">% hObject    handle to listbox1 (see GCBO)</span>
</div><div id="_line0238" class="line">0238 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0239" class="line">0239 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0240" class="line">0240 
</div><div id="_line0241" class="line">0241 <span class="comment">% Hints: contents = get(hObject,'String') returns listbox1 contents as cell array</span>
</div><div id="_line0242" class="line">0242 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from listbox1</span>
</div><div id="_line0243" class="line">0243 
</div><div id="_line0244" class="line">0244     index_selected = get(handles.listbox1,<span class="string">'Value'</span>);
</div><div id="_line0245" class="line">0245     set(handles.listbox2,<span class="string">'Value'</span>, index_selected);
</div><div id="_line0246" class="line">0246     <a href="#_sub16" class="code" title="subsetStructListbox">setStructListbox</a>(handles,handles.idList{index_selected});    
</div><div id="_line0247" class="line">0247 
</div><div id="_line0248" class="line">0248 
</div><div id="_line0249" class="line">0249 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
</div><div id="_line0250" class="line">0250 <a name="_sub7" href="#_subfunctions" class="code">function listbox1_CreateFcn(hObject, eventdata, handles)</a>
</div><div id="_line0251" class="line">0251 <span class="comment">% hObject    handle to listbox1 (see GCBO)</span>
</div><div id="_line0252" class="line">0252 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0253" class="line">0253 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
</div><div id="_line0254" class="line">0254 
</div><div id="_line0255" class="line">0255 <span class="comment">% Hint: listbox controls usually have a white background, change</span>
</div><div id="_line0256" class="line">0256 <span class="comment">%       'usewhitebg' to 0 to use default.  See ISPC and COMPUTER.</span>
</div><div id="_line0257" class="line">0257 <span class="comment">% usewhitebg = 1;</span>
</div><div id="_line0258" class="line">0258 <span class="comment">% if usewhitebg</span>
</div><div id="_line0259" class="line">0259     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
</div><div id="_line0260" class="line">0260 <span class="comment">% else</span>
</div><div id="_line0261" class="line">0261 <span class="comment">%     set(hObject,'BackgroundColor',get(0,'defaultUicontrolBackgroundColor'));</span>
</div><div id="_line0262" class="line">0262 <span class="comment">% end</span>
</div><div id="_line0263" class="line">0263 
</div><div id="_line0264" class="line">0264 <span class="comment">% jScrollPane = findjobj(hObject);</span>
</div><div id="_line0265" class="line">0265 <span class="comment">% jListbox = jScrollPane.getViewport.getComponent(0);</span>
</div><div id="_line0266" class="line">0266 <span class="comment">% set(jListbox, 'SelectionBackground',[0.8 0.8 0.8]);%Color(0.2,0.2,0.2)</span>
</div><div id="_line0267" class="line">0267 
</div><div id="_line0268" class="line">0268 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
</div><div id="_line0269" class="line">0269 <a name="_sub8" href="#_subfunctions" class="code">function figure1_CreateFcn(hObject, eventdata, handles)</a>
</div><div id="_line0270" class="line">0270 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
</div><div id="_line0271" class="line">0271 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0272" class="line">0272 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
</div><div id="_line0273" class="line">0273 
</div><div id="_line0274" class="line">0274 <span class="comment">% Add the current directory to the path, as the pwd might change thru' the</span>
</div><div id="_line0275" class="line">0275 <span class="comment">% gui. Remove the directory from the path when gui is closed</span>
</div><div id="_line0276" class="line">0276 <span class="comment">% (See figure1_DeleteFcn)</span>
</div><div id="_line0277" class="line">0277 <span class="comment">% setappdata(hObject, 'StartPath', pwd);</span>
</div><div id="_line0278" class="line">0278 <span class="comment">% addpath(pwd);</span>
</div><div id="_line0279" class="line">0279 
</div><div id="_line0280" class="line">0280 
</div><div id="_line0281" class="line">0281 <span class="comment">% --- Executes during object deletion, before destroying properties.</span>
</div><div id="_line0282" class="line">0282 <a name="_sub9" href="#_subfunctions" class="code">function figure1_DeleteFcn(hObject, eventdata, handles)</a>
</div><div id="_line0283" class="line">0283 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
</div><div id="_line0284" class="line">0284 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0285" class="line">0285 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0286" class="line">0286 
</div><div id="_line0287" class="line">0287 <span class="comment">% Remove the directory added to the path in the figure1_CreateFcn.</span>
</div><div id="_line0288" class="line">0288 <span class="comment">% if isappdata(hObject, 'StartPath')</span>
</div><div id="_line0289" class="line">0289 <span class="comment">%     rmpath(getappdata(hObject, 'StartPath'));</span>
</div><div id="_line0290" class="line">0290 <span class="comment">% end</span>
</div><div id="_line0291" class="line">0291 
</div><div id="_line0292" class="line">0292 
</div><div id="_line0293" class="line">0293 
</div><div id="_line0294" class="line">0294 <span class="comment">% --- Executes on selection change in listbox2.</span>
</div><div id="_line0295" class="line">0295 <a name="_sub10" href="#_subfunctions" class="code">function listbox2_Callback(hObject, eventdata, handles)</a>
</div><div id="_line0296" class="line">0296 <span class="comment">% hObject    handle to listbox2 (see GCBO)</span>
</div><div id="_line0297" class="line">0297 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0298" class="line">0298 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0299" class="line">0299 
</div><div id="_line0300" class="line">0300 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns listbox2 contents as cell array</span>
</div><div id="_line0301" class="line">0301 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from listbox2</span>
</div><div id="_line0302" class="line">0302     index_selected = get(handles.listbox2,<span class="string">'Value'</span>);
</div><div id="_line0303" class="line">0303     set(handles.listbox1,<span class="string">'Value'</span>, index_selected);
</div><div id="_line0304" class="line">0304     <a href="#_sub16" class="code" title="subsetStructListbox">setStructListbox</a>(handles,handles.idList{index_selected});
</div><div id="_line0305" class="line">0305 
</div><div id="_line0306" class="line">0306 
</div><div id="_line0307" class="line">0307 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
</div><div id="_line0308" class="line">0308 <a name="_sub11" href="#_subfunctions" class="code">function listbox2_CreateFcn(hObject, eventdata, handles)</a>
</div><div id="_line0309" class="line">0309 <span class="comment">% hObject    handle to listbox2 (see GCBO)</span>
</div><div id="_line0310" class="line">0310 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0311" class="line">0311 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
</div><div id="_line0312" class="line">0312 
</div><div id="_line0313" class="line">0313 <span class="comment">% Hint: listbox controls usually have a white background on Windows.</span>
</div><div id="_line0314" class="line">0314 <span class="comment">%       See ISPC and COMPUTER.</span>
</div><div id="_line0315" class="line">0315 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
</div><div id="_line0316" class="line">0316     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
</div><div id="_line0317" class="line">0317 <span class="keyword">end</span>
</div><div id="_line0318" class="line">0318 <span class="comment">% jScrollPane = findjobj(hObject);</span>
</div><div id="_line0319" class="line">0319 <span class="comment">% jListbox = jScrollPane.getViewport.getComponent(0);</span>
</div><div id="_line0320" class="line">0320 <span class="comment">% set(jListbox, 'SelectionBackground',[0.8 0.8 0.8]);%Color(0.2,0.2,0.2)</span>
</div><div id="_line0321" class="line">0321 
</div><div id="_line0322" class="line">0322 
</div><div id="_line0323" class="line">0323 <span class="comment">% --- Executes on selection change in structListbox.</span>
</div><div id="_line0324" class="line">0324 <a name="_sub12" href="#_subfunctions" class="code">function structListbox_Callback(hObject, eventdata, handles)</a>
</div><div id="_line0325" class="line">0325 <span class="comment">% hObject    handle to structListbox (see GCBO)</span>
</div><div id="_line0326" class="line">0326 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0327" class="line">0327 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0328" class="line">0328 
</div><div id="_line0329" class="line">0329 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns structListbox contents as cell array</span>
</div><div id="_line0330" class="line">0330 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from structListbox</span>
</div><div id="_line0331" class="line">0331 <span class="comment">% index_selected = get(handles.structListbox,'Value');</span>
</div><div id="_line0332" class="line">0332 <span class="comment">% set(handles.structValueListbox,'Value', index_selected);</span>
</div><div id="_line0333" class="line">0333 
</div><div id="_line0334" class="line">0334 
</div><div id="_line0335" class="line">0335 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
</div><div id="_line0336" class="line">0336 <a name="_sub13" href="#_subfunctions" class="code">function structListbox_CreateFcn(hObject, eventdata, handles)</a>
</div><div id="_line0337" class="line">0337 <span class="comment">% hObject    handle to structListbox (see GCBO)</span>
</div><div id="_line0338" class="line">0338 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0339" class="line">0339 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
</div><div id="_line0340" class="line">0340 
</div><div id="_line0341" class="line">0341 <span class="comment">% Hint: listbox controls usually have a white background on Windows.</span>
</div><div id="_line0342" class="line">0342 <span class="comment">%       See ISPC and COMPUTER.</span>
</div><div id="_line0343" class="line">0343 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
</div><div id="_line0344" class="line">0344     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
</div><div id="_line0345" class="line">0345 <span class="keyword">end</span>
</div><div id="_line0346" class="line">0346 set(hObject,<span class="string">'Enable'</span>,<span class="string">'inactive'</span>);
</div><div id="_line0347" class="line">0347 <span class="comment">%</span>
</div><div id="_line0348" class="line">0348 <span class="comment">% jScrollPane = findjobj(hObject);</span>
</div><div id="_line0349" class="line">0349 <span class="comment">% jListbox = jScrollPane.getViewport.getComponent(0);</span>
</div><div id="_line0350" class="line">0350 <span class="comment">% set(jListbox, 'SelectionBackground',[0.8 0.8 0.8]);%Color(0.2,0.2,0.2)</span>
</div><div id="_line0351" class="line">0351 
</div><div id="_line0352" class="line">0352 
</div><div id="_line0353" class="line">0353 <span class="comment">% --- Executes on selection change in structValueListbox.</span>
</div><div id="_line0354" class="line">0354 <a name="_sub14" href="#_subfunctions" class="code">function structValueListbox_Callback(hObject, eventdata, handles)</a>
</div><div id="_line0355" class="line">0355 <span class="comment">% hObject    handle to structValueListbox (see GCBO)</span>
</div><div id="_line0356" class="line">0356 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0357" class="line">0357 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0358" class="line">0358 
</div><div id="_line0359" class="line">0359 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns structValueListbox contents as cell array</span>
</div><div id="_line0360" class="line">0360 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from structValueListbox</span>
</div><div id="_line0361" class="line">0361     selectedId=     handles.idList{get(handles.listbox1,<span class="string">'Value'</span>)};
</div><div id="_line0362" class="line">0362     level_selected = get(handles.structValueListbox,<span class="string">'Value'</span>);
</div><div id="_line0363" class="line">0363     <span class="comment">%setFieldEditor(handles,index_selected);</span>
</div><div id="_line0364" class="line">0364     <a href="#_sub16" class="code" title="subsetStructListbox">setStructListbox</a>(handles,selectedId,handles.levelList{level_selected});
</div><div id="_line0365" class="line">0365 
</div><div id="_line0366" class="line">0366     flatStruct=handles.param.flatStruct;
</div><div id="_line0367" class="line">0367     activeLevels=find(handles.param.activeLevels);
</div><div id="_line0368" class="line">0368     field_index=(strcmp(selectedId,{flatStruct.identifier}));
</div><div id="_line0369" class="line">0369     
</div><div id="_line0370" class="line">0370     field=flatStruct(field_index);
</div><div id="_line0371" class="line">0371     
</div><div id="_line0372" class="line">0372     <span class="keyword">if</span> strcmp(get(handles.figure1,<span class="string">'SelectionType'</span>),<span class="string">'open'</span>)
</div><div id="_line0373" class="line">0373         <span class="comment">%add right click mouse actions: move along hierarchy | delete entry</span>
</div><div id="_line0374" class="line">0374         hcmenu = uicontextmenu(<span class="string">'Parent'</span>,handles.figure1);
</div><div id="_line0375" class="line">0375         <span class="keyword">if</span> ~field.isNode <span class="comment">%it's not a tree branch</span>
</div><div id="_line0376" class="line">0376             nLevels=length(activeLevels);
</div><div id="_line0377" class="line">0377             colorString=handles.structInfo.levelDisplayColors;
</div><div id="_line0378" class="line">0378 
</div><div id="_line0379" class="line">0379             <span class="keyword">for</span> iLevel=1:nLevels
</div><div id="_line0380" class="line">0380                 <span class="keyword">if</span>(iLevel==level_selected)
</div><div id="_line0381" class="line">0381                     <span class="keyword">continue</span>;
</div><div id="_line0382" class="line">0382                 <span class="keyword">end</span>
</div><div id="_line0383" class="line">0383                 menuText=sprintf(<span class="string">'&lt;HTML&gt;Assign from &lt;FONT color=%s&gt;%s&lt;/FONT&gt; to &lt;FONT color=%s&gt;%s&lt;/FONT&gt;&lt;/HTML&gt;'</span>,colorString{level_selected}, handles.structInfo.levelDisplayNames{level_selected}, colorString{iLevel}, handles.structInfo.levelDisplayNames{iLevel});
</div><div id="_line0384" class="line">0384                 cb={@<a href="#_sub21" class="code" title="substructValueListbox_Reassign">structValueListbox_Reassign</a>,activeLevels(level_selected), activeLevels(iLevel)};
</div><div id="_line0385" class="line">0385                 uimenu(hcmenu, <span class="string">'Label'</span>, menuText, <span class="string">'Callback'</span>, cb);
</div><div id="_line0386" class="line">0386             <span class="keyword">end</span>
</div><div id="_line0387" class="line">0387 
</div><div id="_line0388" class="line">0388             menuText=sprintf(<span class="string">'&lt;HTML&gt;Delete from &lt;FONT color=%s&gt;%s&lt;/FONT&gt;&lt;/HTML&gt;'</span>,colorString{level_selected}, handles.structInfo.levelDisplayNames{level_selected});
</div><div id="_line0389" class="line">0389             cb={@<a href="#_sub21" class="code" title="substructValueListbox_Reassign">structValueListbox_Reassign</a>, activeLevels(level_selected)};
</div><div id="_line0390" class="line">0390             uimenu(hcmenu, <span class="string">'Label'</span>, menuText, <span class="string">'Callback'</span>, cb,<span class="string">'Separator'</span>,<span class="string">'on'</span>);
</div><div id="_line0391" class="line">0391         <span class="keyword">end</span>
</div><div id="_line0392" class="line">0392     <span class="comment">%     set(handles.structValueListbox,'uicontextmenu',hcmenu)</span>
</div><div id="_line0393" class="line">0393         set(handles.figure1,<span class="string">'uicontextmenu'</span>,hcmenu)
</div><div id="_line0394" class="line">0394         fig1Units=get(handles.figure1,<span class="string">'units'</span>);
</div><div id="_line0395" class="line">0395         set(handles.figure1,<span class="string">'units'</span>,<span class="string">'pixels'</span>);
</div><div id="_line0396" class="line">0396         fig1Pos=get(handles.figure1,<span class="string">'Position'</span>);
</div><div id="_line0397" class="line">0397         currentMouse=get(0,<span class="string">'PointerLocation'</span>);<span class="comment">%get(handles.figure1,'CurrentPoint');</span>
</div><div id="_line0398" class="line">0398         pos=currentMouse-fig1Pos(1:2);
</div><div id="_line0399" class="line">0399         set(hcmenu,<span class="string">'Position'</span>,pos);
</div><div id="_line0400" class="line">0400         set(handles.figure1,<span class="string">'units'</span>,fig1Units);
</div><div id="_line0401" class="line">0401         set(hcmenu,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
</div><div id="_line0402" class="line">0402     <span class="keyword">end</span>
</div><div id="_line0403" class="line">0403 <span class="comment">% set(handles.structListbox,'Value', index_selected);</span>
</div><div id="_line0404" class="line">0404 
</div><div id="_line0405" class="line">0405 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
</div><div id="_line0406" class="line">0406 <a name="_sub15" href="#_subfunctions" class="code">function structValueListbox_CreateFcn(hObject, eventdata, handles)</a>
</div><div id="_line0407" class="line">0407 <span class="comment">% hObject    handle to structValueListbox (see GCBO)</span>
</div><div id="_line0408" class="line">0408 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0409" class="line">0409 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
</div><div id="_line0410" class="line">0410 
</div><div id="_line0411" class="line">0411 <span class="comment">% Hint: listbox controls usually have a white background on Windows.</span>
</div><div id="_line0412" class="line">0412 <span class="comment">%       See ISPC and COMPUTER.</span>
</div><div id="_line0413" class="line">0413     <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
</div><div id="_line0414" class="line">0414         set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
</div><div id="_line0415" class="line">0415     <span class="keyword">end</span>
</div><div id="_line0416" class="line">0416     <span class="comment">% set(hObject,'Enable','inactive');</span>
</div><div id="_line0417" class="line">0417     set(hObject,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
</div><div id="_line0418" class="line">0418 
</div><div id="_line0419" class="line">0419 
</div><div id="_line0420" class="line">0420 <a name="_sub16" href="#_subfunctions" class="code">function setStructListbox(handles,selectedId,selectedHierarchy)</a>
</div><div id="_line0421" class="line">0421     <span class="comment">%get current field:</span>
</div><div id="_line0422" class="line">0422     flatStruct=handles.param.flatStruct;
</div><div id="_line0423" class="line">0423     activeLevels=find(handles.param.activeLevels);
</div><div id="_line0424" class="line">0424     
</div><div id="_line0425" class="line">0425     
</div><div id="_line0426" class="line">0426     field_index=(strcmp(selectedId,{flatStruct.identifier}));
</div><div id="_line0427" class="line">0427     
</div><div id="_line0428" class="line">0428     field=flatStruct(field_index);
</div><div id="_line0429" class="line">0429     
</div><div id="_line0430" class="line">0430     <span class="keyword">if</span>(nargin&lt;3)
</div><div id="_line0431" class="line">0431         full_index=max(field.hierarchyLevels);
</div><div id="_line0432" class="line">0432         selectedHierarchy=handles.param.structNames{full_index};
</div><div id="_line0433" class="line">0433         index=find(activeLevels==full_index);
</div><div id="_line0434" class="line">0434     <span class="keyword">else</span>
</div><div id="_line0435" class="line">0435         full_index=find(strcmp(selectedHierarchy,handles.param.structNames));
</div><div id="_line0436" class="line">0436         index=find(activeLevels==full_index);
</div><div id="_line0437" class="line">0437     <span class="keyword">end</span>
</div><div id="_line0438" class="line">0438     
</div><div id="_line0439" class="line">0439     <span class="comment">%select the names of the structs that define this field:</span>
</div><div id="_line0440" class="line">0440     set(handles.structListbox,<span class="string">'Value'</span>,find(ismember(activeLevels,field.hierarchyLevels)));
</div><div id="_line0441" class="line">0441     <span class="comment">%and display the values of these next to them</span>
</div><div id="_line0442" class="line">0442     nLevels=length(activeLevels);
</div><div id="_line0443" class="line">0443     valueStrings=cell(1,nLevels);
</div><div id="_line0444" class="line">0444     values=cell(1,nLevels);
</div><div id="_line0445" class="line">0445     <span class="keyword">for</span> iLevel=1:nLevels
</div><div id="_line0446" class="line">0446         isFieldLevel=any(field.hierarchyLevels==activeLevels(iLevel));
</div><div id="_line0447" class="line">0447         <span class="keyword">if</span> isFieldLevel &amp;&amp; ~field.isNode
</div><div id="_line0448" class="line">0448             values{iLevel}=getParameter(handles.param,selectedId,activeLevels(iLevel));
</div><div id="_line0449" class="line">0449             valueStrings{iLevel}=params.valueString(values{iLevel});<span class="comment">%evalc('disp(values{iLevel})');</span>
</div><div id="_line0450" class="line">0450         <span class="keyword">end</span>
</div><div id="_line0451" class="line">0451     <span class="keyword">end</span>
</div><div id="_line0452" class="line">0452     
</div><div id="_line0453" class="line">0453     set(handles.structValueListbox,<span class="string">'String'</span>,valueStrings);
</div><div id="_line0454" class="line">0454 <span class="comment">%     handles.structInfo.currentValueStrings=valueStrings;</span>
</div><div id="_line0455" class="line">0455 <span class="comment">%     handles.structInfo.currentField=field_index;</span>
</div><div id="_line0456" class="line">0456 <span class="comment">%     handles.structInfo.currentHierarchy=index;</span>
</div><div id="_line0457" class="line">0457 <span class="comment">%     handles.structInfo.currentLevel=handles.structInfo.levels(index);</span>
</div><div id="_line0458" class="line">0458 <span class="comment">%     handles.structInfo.currentValues = values;</span>
</div><div id="_line0459" class="line">0459     
</div><div id="_line0460" class="line">0460     <span class="comment">%select the value that is currenty used in the merged struct</span>
</div><div id="_line0461" class="line">0461     set(handles.structValueListbox,<span class="string">'Value'</span>, index);
</div><div id="_line0462" class="line">0462     
</div><div id="_line0463" class="line">0463     <span class="comment">% set(handles.fieldEditor,'String',values{field.hierarchyTopLevel});</span>
</div><div id="_line0464" class="line">0464     <a href="#_sub17" class="code" title="subsetFieldEditor">setFieldEditor</a>(handles,selectedId,selectedHierarchy);
</div><div id="_line0465" class="line">0465          
</div><div id="_line0466" class="line">0466     guidata(handles.figure1,handles);
</div><div id="_line0467" class="line">0467     
</div><div id="_line0468" class="line">0468     
</div><div id="_line0469" class="line">0469 <a name="_sub17" href="#_subfunctions" class="code">function setFieldEditor(handles,selectedId,selectedHierarchy)</a>
</div><div id="_line0470" class="line">0470     flatStruct=handles.param.flatStruct;
</div><div id="_line0471" class="line">0471 <span class="comment">%     activeLevels=find(handles.param.activeLevels);</span>
</div><div id="_line0472" class="line">0472     field_index=(strcmp(selectedId,{flatStruct.identifier}));
</div><div id="_line0473" class="line">0473     field=flatStruct(field_index);
</div><div id="_line0474" class="line">0474     <span class="keyword">if</span>(nargin&lt;3)
</div><div id="_line0475" class="line">0475         full_index=max(field.hierarchyLevels);
</div><div id="_line0476" class="line">0476 <span class="comment">%         selectedHierarchy=handles.param.structNames{full_index};</span>
</div><div id="_line0477" class="line">0477 <span class="comment">%         index=find(activeLevels==full_index);</span>
</div><div id="_line0478" class="line">0478     <span class="keyword">else</span>
</div><div id="_line0479" class="line">0479         full_index=find(strcmp(selectedHierarchy,handles.param.structNames));
</div><div id="_line0480" class="line">0480 <span class="comment">%         index=find(activeLevels==full_index);</span>
</div><div id="_line0481" class="line">0481     <span class="keyword">end</span>
</div><div id="_line0482" class="line">0482     
</div><div id="_line0483" class="line">0483     <span class="keyword">if</span> field.isNode
</div><div id="_line0484" class="line">0484         set(handles.fieldEditor,<span class="string">'Enable'</span>,<span class="string">'inactive'</span>);
</div><div id="_line0485" class="line">0485     <span class="keyword">else</span>
</div><div id="_line0486" class="line">0486         
</div><div id="_line0487" class="line">0487         <span class="keyword">if</span> any(field.hierarchyLevels==full_index)
</div><div id="_line0488" class="line">0488             valueString=params.valueString(getParameter(handles.param,selectedId,full_index));
</div><div id="_line0489" class="line">0489         <span class="keyword">else</span>
</div><div id="_line0490" class="line">0490             valueString=<span class="string">''</span>;
</div><div id="_line0491" class="line">0491         <span class="keyword">end</span>
</div><div id="_line0492" class="line">0492 
</div><div id="_line0493" class="line">0493         set(handles.fieldEditor,<span class="string">'String'</span>,valueString);
</div><div id="_line0494" class="line">0494    
</div><div id="_line0495" class="line">0495         set(handles.fieldEditor,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
</div><div id="_line0496" class="line">0496     <span class="keyword">end</span>
</div><div id="_line0497" class="line">0497 
</div><div id="_line0498" class="line">0498 
</div><div id="_line0499" class="line">0499 <a name="_sub18" href="#_subfunctions" class="code">function fieldEditor_Callback(hObject, eventdata, handles) </a><span class="comment">%#ok&lt;*INUSL&gt;</span>
</div><div id="_line0500" class="line">0500 <span class="comment">% hObject    handle to fieldEditor (see GCBO)</span>
</div><div id="_line0501" class="line">0501 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0502" class="line">0502 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0503" class="line">0503 
</div><div id="_line0504" class="line">0504 <span class="comment">% Hints: get(hObject,'String') returns contents of fieldEditor as text</span>
</div><div id="_line0505" class="line">0505 <span class="comment">%        str2double(get(hObject,'String')) returns contents of fieldEditor as a double</span>
</div><div id="_line0506" class="line">0506 
</div><div id="_line0507" class="line">0507 <span class="comment">%pressed enter (I hope)</span>
</div><div id="_line0508" class="line">0508     <span class="keyword">if</span> strcmp(get(handles.figure1,<span class="string">'SelectionType'</span>),<span class="string">'normal'</span>);
</div><div id="_line0509" class="line">0509         selectedId=     handles.idList{get(handles.listbox1,<span class="string">'Value'</span>)};
</div><div id="_line0510" class="line">0510         level_selected = get(handles.structValueListbox,<span class="string">'Value'</span>);
</div><div id="_line0511" class="line">0511         flatStruct=handles.param.flatStruct;
</div><div id="_line0512" class="line">0512         activeLevels=find(handles.param.activeLevels);
</div><div id="_line0513" class="line">0513         full_index=activeLevels(level_selected);
</div><div id="_line0514" class="line">0514         
</div><div id="_line0515" class="line">0515         field_index=(strcmp(selectedId,{flatStruct.identifier}));
</div><div id="_line0516" class="line">0516         field=flatStruct(field_index);
</div><div id="_line0517" class="line">0517         
</div><div id="_line0518" class="line">0518         <span class="keyword">try</span>
</div><div id="_line0519" class="line">0519             <span class="keyword">if</span> any(field.hierarchyLevels==full_index)
</div><div id="_line0520" class="line">0520                 value=getParameter(handles.param, selectedId, activeLevels(level_selected));
</div><div id="_line0521" class="line">0521             <span class="keyword">end</span>
</div><div id="_line0522" class="line">0522             v=get(handles.fieldEditor,<span class="string">'String'</span>);
</div><div id="_line0523" class="line">0523             <span class="keyword">if</span> isempty(v)
</div><div id="_line0524" class="line">0524                 v=<span class="string">'[]'</span>;
</div><div id="_line0525" class="line">0525             <span class="keyword">end</span>
</div><div id="_line0526" class="line">0526             evalc([<span class="string">'value='</span> v]);
</div><div id="_line0527" class="line">0527 <span class="comment">%             valueString=params.valueString(value);%a first kind of text that it might hve worked.</span>
</div><div id="_line0528" class="line">0528 
</div><div id="_line0529" class="line">0529             addField(handles.param,selectedId,value,activeLevels(level_selected)); 
</div><div id="_line0530" class="line">0530 <span class="comment">%             if any(field.hierarchyLevels==activeLevels(level_selected)) %parameter changed</span>
</div><div id="_line0531" class="line">0531 <span class="comment">%                 field.hierarchyValues{field.hierarchyLevels==handles.structInfo.currentLevel}=value;</span>
</div><div id="_line0532" class="line">0532 <span class="comment">%             else %parameter is new to that level</span>
</div><div id="_line0533" class="line">0533 <span class="comment">%                 field.hierarchyValues{end+1}=value;</span>
</div><div id="_line0534" class="line">0534 <span class="comment">%                 field.hierarchyLevels(end+1)=handles.structInfo.currentLevel;</span>
</div><div id="_line0535" class="line">0535 <span class="comment">%                 [~,idx]=sort(field.hierarchyLevels);</span>
</div><div id="_line0536" class="line">0536 <span class="comment">%                 field.hierarchyValues=field.hierarchyValues(idx);</span>
</div><div id="_line0537" class="line">0537 <span class="comment">%                 field.hierarchyLevels=field.hierarchyLevels(idx);</span>
</div><div id="_line0538" class="line">0538 <span class="comment">%             end</span>
</div><div id="_line0539" class="line">0539 <span class="comment">%</span>
</div><div id="_line0540" class="line">0540 <span class="comment">%             if activeLevels(level_selected)==max(field.hierarchyLevels) %it's at the top of the hierarchy</span>
</div><div id="_line0541" class="line">0541 <span class="comment">%                 field.value=value;</span>
</div><div id="_line0542" class="line">0542 <span class="comment">%                 field.valueString=valueString;</span>
</div><div id="_line0543" class="line">0543 <span class="comment">%                 field.hierarchyTopLevel=handles.structInfo.currentLevel;</span>
</div><div id="_line0544" class="line">0544 <span class="comment">%             end</span>
</div><div id="_line0545" class="line">0545 <span class="comment">%             handles.flatStruct(handles.structInfo.currentField)=field;</span>
</div><div id="_line0546" class="line">0546 <span class="comment">%             guidata(handles.figure1,handles);</span>
</div><div id="_line0547" class="line">0547 
</div><div id="_line0548" class="line">0548             <span class="keyword">if</span> level_selected&gt;=max(field.hierarchyLevels) <span class="comment">%it's at the top of the hierarchy</span>
</div><div id="_line0549" class="line">0549                 <span class="comment">%reload everything</span>
</div><div id="_line0550" class="line">0550                 <a href="#_sub2" class="code" title="subsetListboxes">setListboxes</a>(handles,selectedId, handles.levelList{activeLevels(level_selected)});
</div><div id="_line0551" class="line">0551             <span class="keyword">else</span>
</div><div id="_line0552" class="line">0552                 <a href="#_sub16" class="code" title="subsetStructListbox">setStructListbox</a>(handles,selectedId,handles.levelList{activeLevels(level_selected)});
</div><div id="_line0553" class="line">0553             <span class="keyword">end</span>      
</div><div id="_line0554" class="line">0554 
</div><div id="_line0555" class="line">0555 
</div><div id="_line0556" class="line">0556         <span class="keyword">catch</span> ME
</div><div id="_line0557" class="line">0557             display(ME);
</div><div id="_line0558" class="line">0558         <span class="keyword">end</span>
</div><div id="_line0559" class="line">0559 
</div><div id="_line0560" class="line">0560     <span class="keyword">end</span>
</div><div id="_line0561" class="line">0561 
</div><div id="_line0562" class="line">0562 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
</div><div id="_line0563" class="line">0563 <a name="_sub19" href="#_subfunctions" class="code">function fieldEditor_CreateFcn(hObject, eventdata, handles) </a><span class="comment">%#ok&lt;*DEFNU,*INUSD&gt;</span>
</div><div id="_line0564" class="line">0564 <span class="comment">% hObject    handle to fieldEditor (see GCBO)</span>
</div><div id="_line0565" class="line">0565 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0566" class="line">0566 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
</div><div id="_line0567" class="line">0567 
</div><div id="_line0568" class="line">0568 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
</div><div id="_line0569" class="line">0569 <span class="comment">%       See ISPC and COMPUTER.</span>
</div><div id="_line0570" class="line">0570     <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
</div><div id="_line0571" class="line">0571         set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
</div><div id="_line0572" class="line">0572     <span class="keyword">end</span>
</div><div id="_line0573" class="line">0573     set(hObject,<span class="string">'Max'</span>,1)
</div><div id="_line0574" class="line">0574 
</div><div id="_line0575" class="line">0575 
</div><div id="_line0576" class="line">0576 <span class="comment">% --- If Enable == 'on', executes on mouse press in 5 pixel border.</span>
</div><div id="_line0577" class="line">0577 <span class="comment">% --- Otherwise, executes on mouse press in 5 pixel border or over structValueListbox.</span>
</div><div id="_line0578" class="line">0578 <a name="_sub20" href="#_subfunctions" class="code">function structValueListbox_ButtonDownFcn(hObject, eventdata, handles)</a>
</div><div id="_line0579" class="line">0579 <span class="comment">% hObject    handle to structValueListbox (see GCBO)</span>
</div><div id="_line0580" class="line">0580 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0581" class="line">0581 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0582" class="line">0582     
</div><div id="_line0583" class="line">0583 <a name="_sub21" href="#_subfunctions" class="code">function structValueListbox_Reassign(hObject,eventData,from,to)</a>
</div><div id="_line0584" class="line">0584     handles=guidata(hObject);
</div><div id="_line0585" class="line">0585 <span class="comment">%     field=handles.flatStruct(handles.structInfo.currentField);</span>
</div><div id="_line0586" class="line">0586     
</div><div id="_line0587" class="line">0587      selectedId=     handles.idList{get(handles.listbox1,<span class="string">'Value'</span>)};
</div><div id="_line0588" class="line">0588      flatStruct=handles.param.flatStruct;
</div><div id="_line0589" class="line">0589      field_index=(strcmp(selectedId,{flatStruct.identifier}));
</div><div id="_line0590" class="line">0590      field=flatStruct(field_index);
</div><div id="_line0591" class="line">0591     
</div><div id="_line0592" class="line">0592     <span class="keyword">if</span> nargin&gt;2 <span class="comment">%move or delete a value</span>
</div><div id="_line0593" class="line">0593 <span class="comment">%         from_index=field.hierarchyLevels==from;</span>
</div><div id="_line0594" class="line">0594         <span class="comment">%was the hierarchyTopLevel involved?</span>
</div><div id="_line0595" class="line">0595         top_involved= from==max(field.hierarchyLevels);
</div><div id="_line0596" class="line">0596         <span class="keyword">if</span> nargin==3    
</div><div id="_line0597" class="line">0597             to=from;
</div><div id="_line0598" class="line">0598         <span class="keyword">end</span>
</div><div id="_line0599" class="line">0599 
</div><div id="_line0600" class="line">0600         <span class="comment">%move and delete</span>
</div><div id="_line0601" class="line">0601 <span class="comment">%         to_index=field.hierarchyLevels==to;</span>
</div><div id="_line0602" class="line">0602 <span class="comment">%         field.hierarchyLevels(from_index)=to;</span>
</div><div id="_line0603" class="line">0603 
</div><div id="_line0604" class="line">0604         top_involved=top_involved | to&gt;=max(field.hierarchyLevels);
</div><div id="_line0605" class="line">0605        
</div><div id="_line0606" class="line">0606         thisSubID=field.parentLevels;
</div><div id="_line0607" class="line">0607         Spartial=handles.param.Snew1(ones(1,length(thisSubID)));
</div><div id="_line0608" class="line">0608         [Spartial.subs]=deal(thisSubID{:});
</div><div id="_line0609" class="line">0609         Sfrom=[handles.param.Snew1 Spartial];
</div><div id="_line0610" class="line">0610         Sfrom(2).subs={from};        
</div><div id="_line0611" class="line">0611         Sto=Sfrom;
</div><div id="_line0612" class="line">0612         Sto(2).subs={to};
</div><div id="_line0613" class="line">0613                 
</div><div id="_line0614" class="line">0614         [~]=builtin(<span class="string">'subsasgn'</span>,handles.param,Sto,builtin(<span class="string">'subsref'</span>,handles.param,Sfrom));   
</div><div id="_line0615" class="line">0615         
</div><div id="_line0616" class="line">0616         [~]=builtin(<span class="string">'subsasgn'</span>,handles.param,Sfrom(1:end-1),rmfield(builtin(<span class="string">'subsref'</span>,handles.param,Sfrom(1:end-1)),Sfrom(end).subs));   
</div><div id="_line0617" class="line">0617         
</div><div id="_line0618" class="line">0618         <span class="keyword">if</span> ~any(field.hierarchyLevels==to)
</div><div id="_line0619" class="line">0619             field.hierarchyLevels(end+1)=to;
</div><div id="_line0620" class="line">0620         <span class="keyword">end</span>
</div><div id="_line0621" class="line">0621         field.hierarchyLevels=unique(field.hierarchyLevels);
</div><div id="_line0622" class="line">0622 
</div><div id="_line0623" class="line">0623         field.hierarchyLevels(field.hierarchyLevels==from)=[];
</div><div id="_line0624" class="line">0624         handles.param.flatStruct(field_index)=field;
</div><div id="_line0625" class="line">0625         
</div><div id="_line0626" class="line">0626         new_view_level=to;
</div><div id="_line0627" class="line">0627         <span class="keyword">if</span>(nargin==3) <span class="comment">%if we deleted the value, well switch to the toplevel</span>
</div><div id="_line0628" class="line">0628             new_view_level=max(field.hierarchyLevels);
</div><div id="_line0629" class="line">0629         <span class="keyword">end</span>
</div><div id="_line0630" class="line">0630 
</div><div id="_line0631" class="line">0631         <span class="keyword">if</span> top_involved        
</div><div id="_line0632" class="line">0632             <span class="comment">%reload everything</span>
</div><div id="_line0633" class="line">0633             <a href="#_sub2" class="code" title="subsetListboxes">setListboxes</a>(handles,field.identifier, handles.param.structNames{new_view_level});
</div><div id="_line0634" class="line">0634         <span class="keyword">else</span>
</div><div id="_line0635" class="line">0635             <a href="#_sub16" class="code" title="subsetStructListbox">setStructListbox</a>(handles,field.identifier,handles.param.structNames{new_view_level});
</div><div id="_line0636" class="line">0636         <span class="keyword">end</span>
</div><div id="_line0637" class="line">0637 
</div><div id="_line0638" class="line">0638     <span class="keyword">end</span>
</div><div id="_line0639" class="line">0639 
</div><div id="_line0640" class="line">0640     
</div><div id="_line0641" class="line">0641 <span class="comment">% --- If Enable == 'on', executes on mouse press in 5 pixel border.</span>
</div><div id="_line0642" class="line">0642 <span class="comment">% --- Otherwise, executes on mouse press in 5 pixel border or over structListbox.</span>
</div><div id="_line0643" class="line">0643 <a name="_sub22" href="#_subfunctions" class="code">function structListbox_ButtonDownFcn(hObject, eventdata, handles)</a>
</div><div id="_line0644" class="line">0644 <span class="comment">% hObject    handle to structListbox (see GCBO)</span>
</div><div id="_line0645" class="line">0645 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0646" class="line">0646 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0647" class="line">0647 
</div><div id="_line0648" class="line">0648 
</div><div id="_line0649" class="line">0649 <span class="comment">% --- Executes on button press in pushbutton1.</span>
</div><div id="_line0650" class="line">0650 <a name="_sub23" href="#_subfunctions" class="code">function pushbutton1_Callback(hObject, eventdata, handles)</a>
</div><div id="_line0651" class="line">0651 <span class="comment">% hObject    handle to pushbutton1 (see GCBO)</span>
</div><div id="_line0652" class="line">0652 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
</div><div id="_line0653" class="line">0653 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
</div><div id="_line0654" class="line">0654 <span class="comment">%this is a bit dangerous, as someone might have made changes to the</span>
</div><div id="_line0655" class="line">0655 <span class="comment">%params class in the meantime.....</span>
</div><div id="_line0656" class="line">0656 handles.param.flatStruct=handles.flatStruct;
</div><div id="_line0657" class="line">0657 handles.param.flatStructIdMap=containers.Map({handles.flatStruct.identifier},1:length(handles.flatStruct));
</div></pre></div>
<hr><address>Generated by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005
<br>
check <strong><a href="../../index.html">here</a></strong> date of last update.
<br></address>
</body>
</html>