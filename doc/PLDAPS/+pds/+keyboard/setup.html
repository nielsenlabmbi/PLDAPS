<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of setup</title>
  <meta name="keywords" content="setup">
  <meta name="description" content="pds.git.setup   setup the keyboard queue">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="../../index.html">PLDAPS</a> &gt; <a href="../index.html">+pds</a> &gt; <a href="index.html">+keyboard</a> &gt; setup.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for PLDAPS/+pds/+keyboard&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>pds.keyboard.setup
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>pds.git.setup   setup the keyboard queue</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function p = setup(p,scan) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="description">pds.git.setup   setup the keyboard queue

 Setup universal Mac/PC keyboard and keynames
 set scan to 1 if using button box in scanner, otherwise, leave empty.
 output: kb. a struct with all keys (e.g. kb.pKey = 'p')

 p = pds.keyboard.setup(p)

 T.Czuba 6-4-2008
 ktz updated the function description Apr2013
 jk 2014 adapted to work with version 4.1</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="clearBuffer.html" class="code" title="function p = clearBuffer(p)">pds.keyboard.clearBuffer</a>	pds.git.clearBuffer   clear the keyboard queue</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../PLDAPS/@pldaps/replay.html" class="code" title="function p = replay(p,input)">@pldaps/replay</a>	replay    replay a previously recorded experiment on screen</li><li><a href="../../../PLDAPS/@pldaps/run.html" class="code" title="function p = run(p)">@pldaps/run</a>	run    run a new experiment for a previuously created pldaps class</li></ul>
<!-- crossreference -->

<!-- parameterreference -->
<h2><a name="_cross"></a>PARAMETER USAGE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function uses these parameters:
<ul >
</ul>
This function assigns these parameters:
<ul>
<li><a href="../../../Parameters/keyboard/codes/index.html" class="param" title="">.keyboard.codes:</a>
        <a href="#_line0124" class="code"}">124 </a></li><li><a href="../../../Parameters/keyboard/nCodes.html" class="param" title="">.keyboard.nCodes:</a>
        <a href="#_line0130" class="code"}">130 </a></li></ul>
<!-- parameterreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre><div id="_line0001" class="line">0001 <a name="_sub0" href="#_subfunctions" class="code">function p = setup(p,scan)</a>
</div><div id="_line0002" class="line">0002 <span class="comment">%pds.git.setup   setup the keyboard queue</span>
</div><div id="_line0003" class="line">0003 <span class="comment">%</span>
</div><div id="_line0004" class="line">0004 <span class="comment">% Setup universal Mac/PC keyboard and keynames</span>
</div><div id="_line0005" class="line">0005 <span class="comment">% set scan to 1 if using button box in scanner, otherwise, leave empty.</span>
</div><div id="_line0006" class="line">0006 <span class="comment">% output: kb. a struct with all keys (e.g. kb.pKey = 'p')</span>
</div><div id="_line0007" class="line">0007 <span class="comment">%</span>
</div><div id="_line0008" class="line">0008 <span class="comment">% p = pds.keyboard.setup(p)</span>
</div><div id="_line0009" class="line">0009 <span class="comment">%</span>
</div><div id="_line0010" class="line">0010 <span class="comment">% T.Czuba 6-4-2008</span>
</div><div id="_line0011" class="line">0011 <span class="comment">% ktz updated the function description Apr2013</span>
</div><div id="_line0012" class="line">0012 <span class="comment">% jk 2014 adapted to work with version 4.1</span>
</div><div id="_line0013" class="line">0013 
</div><div id="_line0014" class="line">0014 <span class="keyword">if</span> nargin &lt; 2
</div><div id="_line0015" class="line">0015     scan = 0;
</div><div id="_line0016" class="line">0016 <span class="keyword">end</span>
</div><div id="_line0017" class="line">0017 
</div><div id="_line0018" class="line">0018 KbName(<span class="string">'UnifyKeyNames'</span>);
</div><div id="_line0019" class="line">0019 kb.oneKey = KbName(<span class="string">'1!'</span>);
</div><div id="_line0020" class="line">0020 kb.twoKey = KbName(<span class="string">'2@'</span>);
</div><div id="_line0021" class="line">0021 kb.thrKey = KbName(<span class="string">'3#'</span>);
</div><div id="_line0022" class="line">0022 kb.forKey = KbName(<span class="string">'4$'</span>);
</div><div id="_line0023" class="line">0023 kb.fivKey = KbName(<span class="string">'5%'</span>);
</div><div id="_line0024" class="line">0024 kb.sixKey = KbName(<span class="string">'6^'</span>);
</div><div id="_line0025" class="line">0025 kb.svnKey = KbName(<span class="string">'7&amp;'</span>);
</div><div id="_line0026" class="line">0026 kb.eitKey = KbName(<span class="string">'8*'</span>);
</div><div id="_line0027" class="line">0027 kb.ninKey = KbName(<span class="string">'9('</span>);
</div><div id="_line0028" class="line">0028 kb.zerKey = KbName(<span class="string">'0)'</span>);
</div><div id="_line0029" class="line">0029 kb.minKey = KbName(<span class="string">'-_'</span>);
</div><div id="_line0030" class="line">0030 kb.qKey = KbName(<span class="string">'q'</span>);
</div><div id="_line0031" class="line">0031 kb.wKey = KbName(<span class="string">'w'</span>);
</div><div id="_line0032" class="line">0032 kb.eKey = KbName(<span class="string">'e'</span>);
</div><div id="_line0033" class="line">0033 kb.rKey = KbName(<span class="string">'r'</span>);
</div><div id="_line0034" class="line">0034 kb.tKey = KbName(<span class="string">'t'</span>);
</div><div id="_line0035" class="line">0035 kb.yKey = KbName(<span class="string">'y'</span>);
</div><div id="_line0036" class="line">0036 kb.uKey = KbName(<span class="string">'u'</span>);
</div><div id="_line0037" class="line">0037 kb.iKey = KbName(<span class="string">'i'</span>);
</div><div id="_line0038" class="line">0038 kb.oKey = KbName(<span class="string">'o'</span>);
</div><div id="_line0039" class="line">0039 kb.pKey = KbName(<span class="string">'p'</span>);
</div><div id="_line0040" class="line">0040 kb.aKey = KbName(<span class="string">'a'</span>);
</div><div id="_line0041" class="line">0041 kb.sKey = KbName(<span class="string">'s'</span>);
</div><div id="_line0042" class="line">0042 kb.dKey = KbName(<span class="string">'d'</span>);
</div><div id="_line0043" class="line">0043 kb.fKey = KbName(<span class="string">'f'</span>);
</div><div id="_line0044" class="line">0044 kb.gKey = KbName(<span class="string">'g'</span>);
</div><div id="_line0045" class="line">0045 kb.hKey = KbName(<span class="string">'h'</span>);
</div><div id="_line0046" class="line">0046 kb.jKey = KbName(<span class="string">'j'</span>);
</div><div id="_line0047" class="line">0047 kb.kKey = KbName(<span class="string">'k'</span>);
</div><div id="_line0048" class="line">0048 kb.lKey = KbName(<span class="string">'l'</span>);
</div><div id="_line0049" class="line">0049 kb.zKey = KbName(<span class="string">'z'</span>);
</div><div id="_line0050" class="line">0050 kb.xKey = KbName(<span class="string">'x'</span>);
</div><div id="_line0051" class="line">0051 kb.cKey = KbName(<span class="string">'c'</span>);
</div><div id="_line0052" class="line">0052 kb.vKey = KbName(<span class="string">'v'</span>);
</div><div id="_line0053" class="line">0053 kb.bKey = KbName(<span class="string">'b'</span>);
</div><div id="_line0054" class="line">0054 kb.nKey = KbName(<span class="string">'n'</span>);
</div><div id="_line0055" class="line">0055 kb.mKey = KbName(<span class="string">'m'</span>);
</div><div id="_line0056" class="line">0056 kb.escKey = KbName(<span class="string">'ESCAPE'</span>);
</div><div id="_line0057" class="line">0057 kb.spaceKey = KbName(<span class="string">'space'</span>);
</div><div id="_line0058" class="line">0058 kb.Rarrow = KbName(<span class="string">'RightArrow'</span>);
</div><div id="_line0059" class="line">0059 kb.Larrow = KbName(<span class="string">'LeftArrow'</span>);
</div><div id="_line0060" class="line">0060 kb.Uarrow = KbName(<span class="string">'UpArrow'</span>);
</div><div id="_line0061" class="line">0061 kb.Darrow = KbName(<span class="string">'DownArrow'</span>);
</div><div id="_line0062" class="line">0062 kb.Lctrl = KbName(<span class="string">'LeftControl'</span>);
</div><div id="_line0063" class="line">0063 kb.Lalt = KbName(<span class="string">'LeftAlt'</span>);
</div><div id="_line0064" class="line">0064 kb.return = KbName(<span class="string">'return'</span>);
</div><div id="_line0065" class="line">0065 <span class="comment">%Numeric keypad</span>
</div><div id="_line0066" class="line">0066 kb.KPoneKey = KbName(<span class="string">'1'</span>);
</div><div id="_line0067" class="line">0067 kb.KPtwoKey = KbName(<span class="string">'2'</span>);
</div><div id="_line0068" class="line">0068 kb.KPthrKey = KbName(<span class="string">'3'</span>);
</div><div id="_line0069" class="line">0069 kb.KPforKey = KbName(<span class="string">'4'</span>);
</div><div id="_line0070" class="line">0070 kb.KPfivKey = KbName(<span class="string">'5'</span>);
</div><div id="_line0071" class="line">0071 kb.KPsixKey = KbName(<span class="string">'6'</span>);
</div><div id="_line0072" class="line">0072 kb.KPsvnKey = KbName(<span class="string">'7'</span>);
</div><div id="_line0073" class="line">0073 kb.KPeitKey = KbName(<span class="string">'8'</span>);
</div><div id="_line0074" class="line">0074 kb.KPninKey = KbName(<span class="string">'9'</span>);
</div><div id="_line0075" class="line">0075 kb.KPzerKey = KbName(<span class="string">'0'</span>);
</div><div id="_line0076" class="line">0076 kb.plusKey  = KbName(<span class="string">'=+'</span>);
</div><div id="_line0077" class="line">0077 kb.minusKey = KbName(<span class="string">'-_'</span>);
</div><div id="_line0078" class="line">0078 
</div><div id="_line0079" class="line">0079 
</div><div id="_line0080" class="line">0080 <span class="keyword">if</span> scan &amp;&amp; isMac
</div><div id="_line0081" class="line">0081     
</div><div id="_line0082" class="line">0082     devices = getDevices;
</div><div id="_line0083" class="line">0083     
</div><div id="_line0084" class="line">0084     <span class="keyword">if</span> isempty(devices.keyInputExternal);
</div><div id="_line0085" class="line">0085         
</div><div id="_line0086" class="line">0086         kb.devint =devices.keyInputInternal(1);
</div><div id="_line0087" class="line">0087         
</div><div id="_line0088" class="line">0088         kb.dev = devices.keyInputInternal(end);
</div><div id="_line0089" class="line">0089         
</div><div id="_line0090" class="line">0090         disp(<span class="string">'internal keyboard'</span>);
</div><div id="_line0091" class="line">0091         
</div><div id="_line0092" class="line">0092         disp(kb.devint)
</div><div id="_line0093" class="line">0093         
</div><div id="_line0094" class="line">0094         disp(<span class="string">'no external devices'</span>);
</div><div id="_line0095" class="line">0095         
</div><div id="_line0096" class="line">0096     <span class="keyword">elseif</span> isempty(devices.keyInputInternal);
</div><div id="_line0097" class="line">0097         
</div><div id="_line0098" class="line">0098         kb.devint =devices.keyInputExternal(1);
</div><div id="_line0099" class="line">0099         
</div><div id="_line0100" class="line">0100         kb.dev = devices.keyInputExternal(end);
</div><div id="_line0101" class="line">0101         
</div><div id="_line0102" class="line">0102         disp(<span class="string">'external keyboard'</span>);
</div><div id="_line0103" class="line">0103         
</div><div id="_line0104" class="line">0104         disp(kb.devint)
</div><div id="_line0105" class="line">0105         
</div><div id="_line0106" class="line">0106         disp(<span class="string">'no internal key devices'</span>);
</div><div id="_line0107" class="line">0107         
</div><div id="_line0108" class="line">0108     <span class="keyword">else</span>
</div><div id="_line0109" class="line">0109         
</div><div id="_line0110" class="line">0110         kb.devint = devices.keyInputInternal(1);
</div><div id="_line0111" class="line">0111         
</div><div id="_line0112" class="line">0112         kb.dev = devices.keyInputExternal(1);
</div><div id="_line0113" class="line">0113         
</div><div id="_line0114" class="line">0114         disp(<span class="string">'internal keyboard'</span>);
</div><div id="_line0115" class="line">0115         
</div><div id="_line0116" class="line">0116         disp(kb.devint)
</div><div id="_line0117" class="line">0117         
</div><div id="_line0118" class="line">0118         disp(<span class="string">'external keyboard'</span>);
</div><div id="_line0119" class="line">0119         
</div><div id="_line0120" class="line">0120         disp(kb.dev)
</div><div id="_line0121" class="line">0121         
</div><div id="_line0122" class="line">0122     <span class="keyword">end</span>
</div><div id="_line0123" class="line">0123 <span class="keyword">end</span>
</div><div id="_line0124" class="line">0124 p.trial<a href="../../../Parameters/keyboard/codes/index.html" class="param" title="">.keyboard.codes</a>=kb;
</div><div id="_line0125" class="line">0125 
</div><div id="_line0126" class="line">0126 <a href="pds.keyboard.clearBuffer.html" class="code" title="function p = clearBuffer(p)">pds.keyboard.clearBuffer</a>(p);
</div><div id="_line0127" class="line">0127 
</div><div id="_line0128" class="line">0128  [~, firstPress]=KbQueueCheck();
</div><div id="_line0129" class="line">0129  
</div><div id="_line0130" class="line">0130  p.trial<a href="../../../Parameters/keyboard/nCodes.html" class="param" title="">.keyboard.nCodes</a>=length(firstPress);
</div><div id="_line0131" class="line">0131 
</div><div id="_line0132" class="line">0132 <span class="comment">% [kb.keyIsDown, ~, kb.keyCode] = KbCheck(-1);</span>
</div><div id="_line0133" class="line">0133 
</div><div id="_line0134" class="line">0134 <span class="keyword">end</span>
</div></pre></div>
<hr><address>Generated by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005
<br>
check <strong><a href="../../../index.html">here</a></strong> date of last update.
<br></address>
</body>
</html>