<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of createRigPrefs</title>
  <meta name="keywords" content="createRigPrefs">
  <meta name="description" content="CreateRigPrefspdsBeginExperimentcreate preferences stored as matlab preferences">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">PLDAPS</a> &gt; createRigPrefs.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for PLDAPS&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>createRigPrefs
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>CreateRigPrefspdsBeginExperimentcreate preferences stored as matlab preferences</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function outStruct=createRigPrefs(additionalSettings) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="description">CreateRigPrefspdsBeginExperimentcreate preferences stored as matlab preferences
 outStruct=createRigPrefs(additionalSettings) allows to create and change
 existing rig parameters stored iin the matlab preference 'pldaps'.
 These setting override the default parameters of the pldaps class.
 The optional additionalSettings will be loeaded into a a higher hierarchy
 level from where it can be copied over in the parameters viwer.
 outStruct is the final struct of settings that were also stored in the
 matlab preference system.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="../PLDAPS/@pldaps/pldaps.html" class="code" title="function p = pldaps(varargin)">@pldaps/pldaps</a>	pldaps    main class for PLDAPS (Plexon Datapixx PsychToolbox) version 4.1</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="../PLDAPS/testsuite/pldapsSyncTests.html" class="code" title="">pldapsSyncTests</a>	pldapsSyncTests   a script with commands to test the best datapixx timing options</li></ul>
<!-- crossreference -->

<!-- parameterreference -->
<h2><a name="_cross"></a>PARAMETER USAGE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function uses these parameters:
<ul >
<li><a href="../Parameters/addLevels.html" class="param" title="">.addLevels:</a>	
        <a href="#_line0077" class="code"}">77 </a>    <a href="#_line0080" class="code"}">80 </a></li><li><a href="../Parameters/mergeToSingleStruct.html" class="param" title="">.mergeToSingleStruct:</a>	
        <a href="#_line0126" class="code"}">126 </a></li><li><a href="../Parameters/setLevels.html" class="param" title="">.setLevels:</a>	
        <a href="#_line0125" class="code"}">125 </a></li><li><a href="../Parameters/view.html" class="param" title="">.view:</a>	
        <a href="#_line0084" class="code"}">84 </a></li></ul>
This function assigns these parameters:
<ul>
</ul>
<!-- parameterreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre><div id="_line0001" class="line">0001 <a name="_sub0" href="#_subfunctions" class="code">function outStruct=createRigPrefs(additionalSettings)</a>
</div><div id="_line0002" class="line">0002 <span class="comment">%CreateRigPrefspdsBeginExperimentcreate preferences stored as matlab preferences</span>
</div><div id="_line0003" class="line">0003 <span class="comment">% outStruct=createRigPrefs(additionalSettings) allows to create and change</span>
</div><div id="_line0004" class="line">0004 <span class="comment">% existing rig parameters stored iin the matlab preference 'pldaps'.</span>
</div><div id="_line0005" class="line">0005 <span class="comment">% These setting override the default parameters of the pldaps class.</span>
</div><div id="_line0006" class="line">0006 <span class="comment">% The optional additionalSettings will be loeaded into a a higher hierarchy</span>
</div><div id="_line0007" class="line">0007 <span class="comment">% level from where it can be copied over in the parameters viwer.</span>
</div><div id="_line0008" class="line">0008 <span class="comment">% outStruct is the final struct of settings that were also stored in the</span>
</div><div id="_line0009" class="line">0009 <span class="comment">% matlab preference system.</span>
</div><div id="_line0010" class="line">0010 
</div><div id="_line0011" class="line">0011     <span class="comment">%to we already have current settings?</span>
</div><div id="_line0012" class="line">0012     a=getpref(<span class="string">'pldaps'</span>);
</div><div id="_line0013" class="line">0013     <span class="keyword">if</span> ~isempty(a)
</div><div id="_line0014" class="line">0014         warning(<span class="string">'you already have a pldaps setting, be sure not no lose those seetings....'</span>);
</div><div id="_line0015" class="line">0015     <span class="keyword">end</span>
</div><div id="_line0016" class="line">0016     
</div><div id="_line0017" class="line">0017     <span class="comment">%do we have and old PLDAPS Version setting?</span>
</div><div id="_line0018" class="line">0018     b=getpref(<span class="string">'PLDAPS'</span>);
</div><div id="_line0019" class="line">0019     <span class="comment">%yes? ok, let's try to copy some info over</span>
</div><div id="_line0020" class="line">0020     <span class="keyword">if</span> ~isempty(b)
</div><div id="_line0021" class="line">0021         fromOldPrefs=struct;
</div><div id="_line0022" class="line">0022         <span class="keyword">if</span> isfield(b,<span class="string">'datadir'</span>)
</div><div id="_line0023" class="line">0023             fromOldPrefs.pldaps.dirs.data=b.datadir;
</div><div id="_line0024" class="line">0024         <span class="keyword">end</span>
</div><div id="_line0025" class="line">0025         <span class="keyword">if</span> isfield(b,<span class="string">'wavfiles'</span>)
</div><div id="_line0026" class="line">0026             fromOldPrefs.pldaps.wavfiles.data=b.wavfiles;
</div><div id="_line0027" class="line">0027         <span class="keyword">end</span>
</div><div id="_line0028" class="line">0028         <span class="keyword">if</span> isfield(b,<span class="string">'spikeserver'</span>)
</div><div id="_line0029" class="line">0029             fromOldPrefs.plexon.spikeserver=b.spikeserver;
</div><div id="_line0030" class="line">0030             fromOldPrefs.plexon.spikeserver.use=true;
</div><div id="_line0031" class="line">0031         <span class="keyword">end</span>
</div><div id="_line0032" class="line">0032         <span class="keyword">if</span> isfield(b,<span class="string">'rig'</span>) <span class="comment">%this has the old dv struct</span>
</div><div id="_line0033" class="line">0033             odv=load(b.rig);
</div><div id="_line0034" class="line">0034             odv=odv.dv;
</div><div id="_line0035" class="line">0035             <span class="keyword">if</span> isfield(odv,<span class="string">'pass'</span>)
</div><div id="_line0036" class="line">0036                 fromOldPrefs.pldaps.pass=odv.pass;
</div><div id="_line0037" class="line">0037             <span class="keyword">end</span>
</div><div id="_line0038" class="line">0038             
</div><div id="_line0039" class="line">0039             <span class="comment">%datapixx</span>
</div><div id="_line0040" class="line">0040             <span class="keyword">if</span> isfield(odv,<span class="string">'dp'</span>)
</div><div id="_line0041" class="line">0041                 fromOldPrefs.datapixx=odv.dp;
</div><div id="_line0042" class="line">0042             <span class="keyword">end</span>
</div><div id="_line0043" class="line">0043             <span class="keyword">if</span> isfield(odv,<span class="string">'useDatapixxbool'</span>)
</div><div id="_line0044" class="line">0044                 fromOldPrefs.datapixx.use=odv.useDatapixxbool;
</div><div id="_line0045" class="line">0045             <span class="keyword">end</span>
</div><div id="_line0046" class="line">0046             
</div><div id="_line0047" class="line">0047             <span class="keyword">if</span> isfield(odv,<span class="string">'useMouse'</span>)
</div><div id="_line0048" class="line">0048                 fromOldPrefs.mouse.use=odv.useMouse;
</div><div id="_line0049" class="line">0049             <span class="keyword">end</span>
</div><div id="_line0050" class="line">0050             
</div><div id="_line0051" class="line">0051             <span class="keyword">if</span> isfield(odv,<span class="string">'useEyelink'</span>)
</div><div id="_line0052" class="line">0052                 fromOldPrefs.eyelink.use=odv.useEyelink;
</div><div id="_line0053" class="line">0053             <span class="keyword">end</span>
</div><div id="_line0054" class="line">0054             
</div><div id="_line0055" class="line">0055             <span class="comment">%display</span>
</div><div id="_line0056" class="line">0056             <span class="keyword">if</span> isfield(odv,<span class="string">'disp'</span>)
</div><div id="_line0057" class="line">0057                 fromOldPrefs.display=odv.disp;
</div><div id="_line0058" class="line">0058                 
</div><div id="_line0059" class="line">0059                 <span class="keyword">if</span> isfield(odv.disp,<span class="string">'display'</span>)
</div><div id="_line0060" class="line">0060                     fromOldPrefs.display=rmfield(fromOldPrefs.display,<span class="string">'display'</span>);
</div><div id="_line0061" class="line">0061                     fromOldPrefs.display.displayName=odv.disp.display;
</div><div id="_line0062" class="line">0062                 <span class="keyword">end</span>
</div><div id="_line0063" class="line">0063             <span class="keyword">end</span>
</div><div id="_line0064" class="line">0064             
</div><div id="_line0065" class="line">0065 <span class="comment">%             %keyboard codes</span>
</div><div id="_line0066" class="line">0066 <span class="comment">%             if isfield(odv,'kb')</span>
</div><div id="_line0067" class="line">0067 <span class="comment">%                 fromOldPrefs.keyboard.codes=odv.kb;</span>
</div><div id="_line0068" class="line">0068 <span class="comment">%             end</span>
</div><div id="_line0069" class="line">0069             
</div><div id="_line0070" class="line">0070         <span class="keyword">end</span>
</div><div id="_line0071" class="line">0071     <span class="keyword">else</span>
</div><div id="_line0072" class="line">0072         fromOldPrefs=[];
</div><div id="_line0073" class="line">0073     <span class="keyword">end</span>
</div><div id="_line0074" class="line">0074     
</div><div id="_line0075" class="line">0075     p=<a href="../PLDAPS/@pldaps/pldaps.html" class="code" title="function p = pldaps(varargin)">pldaps</a>(<span class="string">'test'</span>,<span class="string">'nothing'</span>);
</div><div id="_line0076" class="line">0076     <span class="keyword">if</span> isstruct(fromOldPrefs)
</div><div id="_line0077" class="line">0077         p.defaultParameters<a href="../Parameters/addLevels.html" class="param" title="">.addLevels</a>({fromOldPrefs}, {<span class="string">'PLDAPS 3 Prefs'</span>})
</div><div id="_line0078" class="line">0078     <span class="keyword">end</span>
</div><div id="_line0079" class="line">0079     <span class="keyword">if</span> nargin&gt;0
</div><div id="_line0080" class="line">0080         p.defaultParameters<a href="../Parameters/addLevels.html" class="param" title="">.addLevels</a>({additionalSettings}, {<span class="string">'additional Settings'</span>})
</div><div id="_line0081" class="line">0081     <span class="keyword">end</span>
</div><div id="_line0082" class="line">0082     
</div><div id="_line0083" class="line">0083     p.defaultParameters
</div><div id="_line0084" class="line">0084     p.defaultParameters<a href="../Parameters/view.html" class="param" title="">.view</a>
</div><div id="_line0085" class="line">0085     warning(<span class="string">'Loaded default values, any previous preferences and also preferences from the PLDAPS3.'</span>);
</div><div id="_line0086" class="line">0086     fprintf(2,[<span class="keyword">...</span>
</div><div id="_line0087" class="line">0087         <span class="string">'\n\nINSTRUCTIONS for setting local rig preferences:\n'</span><span class="keyword">...</span>
</div><div id="_line0088" class="line">0088         <span class="string">'The local default settings are stored in pldapsRigPrefs. There\n'</span><span class="keyword">...</span>
</div><div id="_line0089" class="line">0089         <span class="string">'are two ways to change the value stored in pldapsRigPrefs for a\n'</span><span class="keyword">...</span>
</div><div id="_line0090" class="line">0090         <span class="string">'given parameter:'</span><span class="keyword">...</span>
</div><div id="_line0091" class="line">0091         <span class="string">'\n\nOption 1: Move the value you want as rig default to \n'</span><span class="keyword">...</span>
</div><div id="_line0092" class="line">0092         <span class="string">'pldapsRigPrefs from another set of preferences (e.g. \n'</span><span class="keyword">...</span>
</div><div id="_line0093" class="line">0093         <span class="string">'SessionParameters, PLDAPS3).  Double click on the value and \n'</span><span class="keyword">...</span>
</div><div id="_line0094" class="line">0094         <span class="string">'select move to pldapsRigPrefs from the drop down menu.'</span><span class="keyword">...</span>
</div><div id="_line0095" class="line">0095         <span class="string">'\n\nOption 2: Define the values yourself by clicking on the value\n'</span><span class="keyword">...</span>
</div><div id="_line0096" class="line">0096         <span class="string">'field of pldapsRigPrefs for the parameter you want to change. Type\n'</span><span class="keyword">...</span>
</div><div id="_line0097" class="line">0097         <span class="string">'the new value in the box below (you will have to physically click\n'</span><span class="keyword">...</span>
</div><div id="_line0098" class="line">0098         <span class="string">'on this box with the mouse) and press enter.'</span><span class="keyword">...</span>
</div><div id="_line0099" class="line">0099         <span class="string">'\n\nVERY IMPORTANT for both options: When you are done adding new \n'</span> <span class="keyword">...</span>
</div><div id="_line0100" class="line">0100         <span class="string">'parameters, type dbcont into the command line and press enter. \n'</span><span class="keyword">...</span>
</div><div id="_line0101" class="line">0101         <span class="string">'(If you forget to type dbcont, createRigPrefs will forget the \n'</span><span class="keyword">...</span>
</div><div id="_line0102" class="line">0102         <span class="string">'new rig prefs).\n\n'</span>]);
</div><div id="_line0103" class="line">0103         
</div><div id="_line0104" class="line">0104 
</div><div id="_line0105" class="line">0105     <span class="comment">%save old prefs</span>
</div><div id="_line0106" class="line">0106     <span class="keyword">if</span> ~isempty(a)
</div><div id="_line0107" class="line">0107         sfn=[<span class="string">'Saved_pldaps_prefs'</span> sprintf(<span class="string">'_%i'</span>, clock)];
</div><div id="_line0108" class="line">0108         warning([<span class="string">'saving old pladps prefs to '</span> sfn]);
</div><div id="_line0109" class="line">0109         save(sfn, <span class="string">'a'</span>);
</div><div id="_line0110" class="line">0110     <span class="keyword">end</span>
</div><div id="_line0111" class="line">0111      
</div><div id="_line0112" class="line">0112     keyboard
</div><div id="_line0113" class="line">0113     <span class="comment">%make changes in the viewer and press done. move things you want in the</span>
</div><div id="_line0114" class="line">0114     <span class="comment">%pldapsRifPrefs to there (doule click in the right value list on the value you want to move and select to move it to pldapsRigPrefs)</span>
</div><div id="_line0115" class="line">0115     <span class="comment">%when done, click 'done'</span>
</div><div id="_line0116" class="line">0116     <span class="comment">%you can skip this or in addition to this, change parameters by editing</span>
</div><div id="_line0117" class="line">0117     <span class="comment">%p.defaultParameters, this is not a struct, but behaves similarly...</span>
</div><div id="_line0118" class="line">0118     <span class="comment">%if you do not want to use the viewer but want to add parameters</span>
</div><div id="_line0119" class="line">0119     <span class="comment">%manually, you should call</span>
</div><div id="_line0120" class="line">0120     <span class="comment">%p.defaultParameters.setLevels([1 2]);</span>
</div><div id="_line0121" class="line">0121     <span class="comment">%now, to ensure that you are adding the values at the correct hierarchy</span>
</div><div id="_line0122" class="line">0122     <span class="comment">%level</span>
</div><div id="_line0123" class="line">0123     
</div><div id="_line0124" class="line">0124     <span class="comment">%once all is set, call</span>
</div><div id="_line0125" class="line">0125     p.defaultParameters<a href="../Parameters/setLevels.html" class="param" title="">.setLevels</a>(2);
</div><div id="_line0126" class="line">0126     outStruct=p.defaultParameters<a href="../Parameters/mergeToSingleStruct.html" class="param" title="">.mergeToSingleStruct</a>();
</div><div id="_line0127" class="line">0127     
</div><div id="_line0128" class="line">0128     fn=fieldnames(outStruct);
</div><div id="_line0129" class="line">0129     outStructc=struct2cell(outStruct);
</div><div id="_line0130" class="line">0130     
</div><div id="_line0131" class="line">0131     <span class="keyword">if</span> ~isempty(a)
</div><div id="_line0132" class="line">0132         rmpref(<span class="string">'pldaps'</span>); <span class="comment">%remove current</span>
</div><div id="_line0133" class="line">0133     <span class="keyword">end</span>
</div><div id="_line0134" class="line">0134     setpref(<span class="string">'pldaps'</span>,fn(:),outStructc); <span class="comment">%set new</span>
</div><div id="_line0135" class="line">0135     
</div><div id="_line0136" class="line">0136     warning(<span class="string">'Done. saved the output of this function as new pldaps prefs'</span>);
</div><div id="_line0137" class="line">0137 <span class="keyword">end</span>
</div></pre></div>
<hr><address>Generated by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005
<br>
check <strong><a href="../index.html">here</a></strong> date of last update.
<br></address>
</body>
</html>